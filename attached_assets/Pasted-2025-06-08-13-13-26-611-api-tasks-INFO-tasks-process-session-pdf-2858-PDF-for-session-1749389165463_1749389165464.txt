2025-06-08 13:13:26,611 - api.tasks - INFO - tasks - process_session_pdf - 2858 - ğŸ“¥ PDF for session 54810 downloaded to temp_files/session_54810_1749388398.pdf
2025-06-08 13:13:26,648 - api.tasks - INFO - tasks - process_session_pdf - 2872 - Extracting text from 46 pages in PDF for session 54810...
2025-06-08 13:13:29,592 - api.tasks - INFO - tasks - process_session_pdf - 2881 - Processed 20/46 pages...
2025-06-08 13:13:31,993 - api.tasks - INFO - tasks - process_session_pdf - 2881 - Processed 40/46 pages...
2025-06-08 13:13:32,945 - api.tasks - INFO - tasks - process_session_pdf - 2882 - ğŸ“„ Extracted ~54285 chars from PDF for session 54810.
2025-06-08 13:13:33,079 - api.tasks - INFO - tasks - process_session_pdf - 2906 - Bills context for session 54810 LLM: 94. AI ë””ì§€í„¸êµê³¼ì„œ ë„ì…ê³¼ì •ì— ëŒ€í•œ ê°ì‚¬ì› ê°ì‚¬ìš”êµ¬ì•ˆ(êµìœ¡ìœ„ì›ì¥ ì œì¶œ)(ì˜ì•ˆë²ˆí˜¸ 2208268), 93. í™˜ê²½ê¸°ìˆ  ë° í™˜ê²½ì‚°ì—… ì§€ì›ë²• ì¼ë¶€ê°œì •ë²•ë¥ ì•ˆ(ëŒ€ì•ˆ)(í™˜ê²½ë…¸ë™ìœ„ì›ì¥ ì œì¶œ)(ì˜ì•ˆë²ˆí˜¸ 2208509), 92. í™”í•™ë¬¼ì§ˆì˜ ë“±ë¡ ë° í‰ê°€ ë“±ì— ê´€í•œ ë²•ë¥  ì¼ë¶€ê°œì •ë²•ë¥ ì•ˆ(ë°•í™ë°° ì˜ì› ëŒ€í‘œë°œì˜)(ì˜ì•ˆë²ˆí˜¸ 2203760), 91. íê¸°ë¬¼ê´€ë¦¬ë²• ì¼ë¶€ê°œì •ë²•ë¥ ì•ˆ(ëŒ€...
2025-06-08 13:13:33,079 - api.tasks - INFO - tasks - process_pdf_text_for_statements - 3146 - ğŸ§¹ Cleaning PDF text for session 54810
2025-06-08 13:13:33,090 - api.tasks - INFO - tasks - process_pdf_text_for_statements - 3148 - ğŸ“„ Cleaned text length: ~54284 chars
2025-06-08 13:13:33,090 - api.tasks - INFO - tasks - process_pdf_text_for_statements - 3150 - ğŸ¤– Starting LLM-based statement processing for session PDF 54810.
2025-06-08 13:13:33,091 - api.tasks - INFO - tasks - process_pdf_text_for_statements - 3171 - ğŸ” Stage 0 (Bill Segment): Attempting to segment transcript by bills for session 54810
2025-06-08 13:13:33,091 - api.tasks - ERROR - tasks - process_pdf_text_for_statements - 3205 - Error during LLM bill segmentation: name '_process_bill_segmentation_with_batching' is not defined. Using bill names for fallback segmentation.
2025-06-08 13:13:33,091 - api.tasks - ERROR - tasks - process_pdf_text_for_statements - 3208 - Traceback for bill segmentation error:
Traceback (most recent call last):
  File "/home/runner/workspace/backend/api/tasks.py", line 3186, in process_pdf_text_for_statements
    bill_segments_from_llm = _process_bill_segmentation_with_batching(
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
NameError: name '_process_bill_segmentation_with_batching' is not defined. Did you mean: '_process_single_segmentation_batch'?
2025-06-08 13:13:33,103 - api.tasks - INFO - tasks - process_pdf_text_for_statements - 3219 - Created 94 fallback segments with actual bill names
2025-06-08 13:13:33,103 - api.tasks - INFO - tasks - process_pdf_text_for_statements - 3254 - Successfully ordered 94 bill segments by appearance.
2025-06-08 13:13:33,103 - api.tasks - INFO - tasks - process_pdf_text_for_statements - 3259 - Processing 94 identified bill text segments...
2025-06-08 13:13:33,103 - api.tasks - INFO - tasks - process_pdf_text_for_statements - 3265 - --- Processing segment for Bill: 94. AI ë””ì§€í„¸êµê³¼ì„œ ë„ì…ê³¼ì •ì— ëŒ€í•œ ê°ì‚¬ì› ê°ì‚¬ìš”êµ¬ì•ˆ(êµìœ¡ìœ„ì›ì¥ ì œì¶œ)(ì˜ì•ˆë²ˆí˜¸ 2208268) (577 chars) ---
2025-06-08 13:13:33,103 - api.tasks - INFO - tasks - extract_statements_for_bill_segment - 1603 - ğŸ” Processing bill segment: '94. AI ë””ì§€í„¸êµê³¼ì„œ ë„ì…ê³¼ì •ì— ëŒ€í•œ ê°ì‚¬ì› ê°ì‚¬ìš”êµ¬ì•ˆ(êµìœ¡ìœ„ì›ì¥ ì œì¶œ)(ì˜ì•ˆë²ˆí˜¸ 2208268)' (session: 54810) - 577 chars
2025-06-08 13:13:33,103 - api.tasks - INFO - tasks - get_speech_segment_indices_from_llm - 1734 - ğŸ¯ Getting speech segment indices for bill '94. AI ë””ì§€í„¸êµê³¼ì„œ ë„ì…ê³¼ì •ì— ëŒ€í•œ ê°ì‚¬ì› ê°ì‚¬ìš”êµ¬ì•ˆ(êµìœ¡ìœ„ì›ì¥ ì œì¶œ)(ì˜ì•ˆë²ˆí˜¸ 22...' (577 chars)
2025-06-08 13:13:33,597 - api.tasks - WARNING - tasks - _process_text_chunk_for_segmentation - 1902 - Response doesn't contain JSON array: ì´ íšŒì˜ë¡ í…ìŠ¤íŠ¸ì—ì„œëŠ” ë°œì–¸ìì˜ ë°œì–¸ êµ¬ê°„ì„ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ì •ë³´ê°€ ì œê³µë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤....
2025-06-08 13:13:33,597 - api.tasks - INFO - tasks - extract_statements_for_bill_segment - 1611 - No speech segments found for bill '94. AI ë””ì§€í„¸êµê³¼ì„œ ë„ì…ê³¼ì •ì— ëŒ€í•œ ê°ì‚¬ì› ê°ì‚¬ìš”êµ¬ì•ˆ(êµìœ¡ìœ„ì›ì¥ ì œì¶œ)(ì˜ì•ˆë²ˆí˜¸ 2208268)', trying â—¯ fallback
2025-06-08 13:13:33,597 - api.tasks - INFO - tasks - process_single_segment_for_statements_with_splitting - 1647 - ğŸ” Stage 2 (â—¯ Splitting): For bill '94. AI ë””ì§€í„¸êµê³¼ì„œ ë„ì…ê³¼ì •ì— ëŒ€í•œ ê°ì‚¬ì› ê°ì‚¬ìš”êµ¬ì•ˆ(êµìœ¡ìœ„ì›ì¥ ì œì¶œ)(ì˜ì•ˆë²ˆí˜¸ 2208268)' (session: 54810) - 577 chars
2025-06-08 13:13:33,597 - api.tasks - INFO - tasks - process_single_segment_for_statements_with_splitting - 1658 - No â—¯ markers found, skipping segment
2025-06-08 13:13:34,597 - api.tasks - INFO - tasks - process_pdf_text_for_statements - 3265 - --- Processing segment for Bill: 93. í™˜ê²½ê¸°ìˆ  ë° í™˜ê²½ì‚°ì—… ì§€ì›ë²• ì¼ë¶€ê°œì •ë²•ë¥ ì•ˆ(ëŒ€ì•ˆ)(í™˜ê²½ë…¸ë™ìœ„ì›ì¥ ì œì¶œ)(ì˜ì•ˆë²ˆí˜¸ 2208509) (577 chars) ---
2025-06-08 13:13:34,598 - api.tasks - INFO - tasks - extract_statements_for_bill_segment - 1603 - ğŸ” Processing bill segment: '93. í™˜ê²½ê¸°ìˆ  ë° í™˜ê²½ì‚°ì—… ì§€ì›ë²• ì¼ë¶€ê°œì •ë²•ë¥ ì•ˆ(ëŒ€ì•ˆ)(í™˜ê²½ë…¸ë™ìœ„ì›ì¥ ì œì¶œ)(ì˜ì•ˆë²ˆí˜¸ 2208509)' (session: 54810) - 577 chars
2025-06-08 13:13:34,598 - api.tasks - INFO - tasks - get_speech_segment_indices_from_llm - 1734 - ğŸ¯ Getting speech segment indices for bi...