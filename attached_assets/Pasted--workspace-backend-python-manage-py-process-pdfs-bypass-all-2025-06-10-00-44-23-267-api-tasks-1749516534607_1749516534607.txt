~/workspace/backend$ python manage.py process_pdfs_bypass --all
2025-06-10 00:44:23,267 - api.tasks - INFO - tasks - initialize_gemini - 314 - âœ… Gemini API configured successfully and status check succeeded. Preview: Hello! How can I help you today?
âœ… Gemini LLM is available
ğŸ” Finding sessions with PDF URLs...
ğŸ“Š Found 2 sessions to process

--- Processing session 54810 (1/2) ---
ğŸ“„ Title: ì œ22ëŒ€ ì œ426íšŒ ì œ1ì°¨ êµ­íšŒë³¸íšŒì˜ (2025ë…„ 06ì›” 05ì¼)
ğŸ“¥ Downloading PDF from: https://record.assembly.go.kr/assembly/viewer/minutes/download/pdf.do?id=54810
âœ… PDF downloaded: temp_files/session_54810_1749516265.pdf
ğŸ“„ Extracting text from PDF...
ğŸ“– Processing 46 pages...
ğŸ“„ Processed 20/46 pages...
ğŸ“„ Processed 40/46 pages...
âœ… Extracted 54285 characters
ğŸ¤– Processing with LLM...
ğŸ“‹ Bills context: 95 bills found
2025-06-10 00:44:36,470 - api.tasks - INFO - tasks - process_session_pdf_text - 4399 - ğŸ”„ Processing PDF text for session 54810 (54285 chars)
2025-06-10 00:44:36,470 - api.tasks - INFO - tasks - clean_pdf_text - 4456 - ğŸ“– Isolated discussion block of 9043 chars (from original 54285).
2025-06-10 00:44:36,471 - api.tasks - INFO - tasks - clean_pdf_text - 4481 - ğŸ§¹ Text cleaning complete. Final length: 8960
2025-06-10 00:44:36,471 - api.tasks - INFO - tasks - extract_statements_with_llm_discovery - 3058 - ğŸ¤– Starting LLM discovery and segmentation for session: 54810
2025-06-10 00:45:09,619 - api.tasks - WARNING - tasks - record_error - 136 - API error (llm_discovery_error). Consecutive errors: 1, backoff: 1s
2025-06-10 00:45:09,620 - api.tasks - ERROR - tasks - extract_statements_with_llm_discovery - 3267 - âŒ Critical error during LLM discovery and segmentation: Expecting value: line 1 column 1 (char 0)
2025-06-10 00:45:09,620 - api.tasks - ERROR - tasks - extract_statements_with_llm_discovery - 3269 - Full traceback for LLM discovery:
Traceback (most recent call last):
  File "/home/runner/workspace/backend/api/tasks.py", line 3192, in extract_statements_with_llm_discovery
    data = json.loads(response_text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/nb21sc3npfc8gvazwnrjxpvb5d48jysx-python3-3.12.7/lib/python3.12/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/nb21sc3npfc8gvazwnrjxpvb5d48jysx-python3-3.12.7/lib/python3.12/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/nb21sc3npfc8gvazwnrjxpvb5d48jysx-python3-3.12.7/lib/python3.12/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
2025-06-10 00:45:09,622 - api.tasks - WARNING - tasks - process_session_pdf_text - 4414 - No statements were extracted by the LLM discovery process for session 54810
âœ… LLM processing completed
ğŸ—‘ï¸ Cleaned up temporary PDF file
âœ… Success: 0 statements created

--- Processing session 54609 (2/2) ---
ğŸ“„ Title: ì œ22ëŒ€ ì œ424íšŒ ì œ7ì°¨ êµ­íšŒë³¸íšŒì˜ (2025ë…„ 05ì›” 01ì¼)
ğŸ“¥ Downloading PDF from: https://record.assembly.go.kr/assembly/viewer/minutes/download/pdf.do?id=54609
âœ… PDF downloaded: temp_files/session_54609_1749516313.pdf
ğŸ“„ Extracting text from PDF...
ğŸ“– Processing 91 pages...
ğŸ“„ Processed 20/91 pages...
ğŸ“„ Processed 40/91 pages...
ğŸ“„ Processed 60/91 pages...
ğŸ“„ Processed 80/91 pages...
âœ… Extracted 118235 characters
ğŸ¤– Processing with LLM...
ğŸ“‹ Bills context: 0 bills found
2025-06-10 00:45:32,906 - api.tasks - INFO - tasks - process_session_pdf_text - 4399 - ğŸ”„ Processing PDF text for session 54609 (118235 chars)
2025-06-10 00:45:32,906 - api.tasks - INFO - tasks - clean_pdf_text - 4456 - ğŸ“– Isolated discussion block of 32543 chars (from original 118235).
2025-06-10 00:45:32,908 - api.tasks - INFO - tasks - clean_pdf_text - 4481 - ğŸ§¹ Text cleaning complete. Final length: 32196
2025-06-10 00:45:32,908 - api.tasks - INFO - tasks - extract_statements_with_llm_discovery - 3058 - ğŸ¤– Starting LLM discovery and segmentation for session: 54609
2025-06-10 00:46:32,333 - api.tasks - WARNING - tasks - record_error - 136 - API error (llm_discovery_error). Consecutive errors: 2, backoff: 2s
2025-06-10 00:46:32,333 - api.tasks - ERROR - tasks - extract_statements_with_llm_discovery - 3267 - âŒ Critical error during LLM discovery and segmentation: 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-06-10 00:46:32,333 - api.tasks - ERROR - tasks - extract_statements_with_llm_discovery - 3269 - Full traceback for LLM discovery:
Traceback (most recent call last):
  File "/home/runner/workspace/backend/api/tasks.py", line 3184, in extract_statements_with_llm_discovery
    response = segmentation_model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.12/site-packages/google/generativeai/generative_models.py", line 248, in generate_content
    response = self._client.generate_content(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.12/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 566, in generate_content
    response = rpc(
               ^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.12/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.12/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.12/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/home/runner/workspace/.pythonlibs/lib/python3.12/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.12/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InternalServerError: 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-06-10 00:46:32,335 - api.tasks - WARNING - tasks - process_session_pdf_text - 4414 - No statements were extracted by the LLM discovery process for session 54609
âœ… LLM processing completed
ğŸ—‘ï¸ Cleaned up temporary PDF file
âœ… Success: 0 statements created

ğŸ‰ Processing complete: 2/2 sessions successful