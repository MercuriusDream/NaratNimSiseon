2025-06-10 21:13:49,093 - api.tasks - INFO - tasks - extract_statements_with_llm_discovery - 3431 - ğŸ› DEBUG: Raw LLM response length: 878 chars
2025-06-10 21:13:49,093 - api.tasks - INFO - tasks - extract_statements_with_llm_discovery - 3433 - ğŸ› DEBUG: Raw LLM response (first 1000 chars): {
  "bills_found": [
    {
      "bill_name": "2025ë…„ë„ ì œ1íšŒ ì¶”ê°€ê²½ì •ì˜ˆì‚°ì•ˆ",
      "start_index": 108,
      "end_index": 1010,
      "category_id": 1,
      "subcategory_ids": [
        1,
        3
      ],
      "keywords": [
        "ì¶”ê°€ê²½ì •ì˜ˆì‚°",
        "ì¬í•´Â·ì¬ë‚œ ëŒ€ì‘",
        "í†µìƒ ìœ„ê¸°",
        "ë¯¼ìƒ ì•ˆì •",
        "êµ­ì±„ ë°œí–‰"
      ],
      "stance": "M",
      "policy_analysis": "ì‚°ë¶ˆ í”¼í•´ ë³µêµ¬, AI ë° í†µìƒ ì§€ì›, ë¯¼ìƒ ì•ˆì •ì„ ìœ„í•œ 12.2ì¡°ì› ê·œëª¨ì˜ ì¶”ê²½ì•ˆ í¸ì„±. ì¬ì • íˆ¬ì…ì„ í†µí•œ ê²½ì œ íšŒë³µ ë„ëª¨."
    },
    {
      "bill_name": "ì‚°ë¶ˆí”¼í•´ì§€ì›ëŒ€ì±… íŠ¹ë³„ìœ„ì›íšŒ êµ¬ì„±",
      "start_index": 1011,
      "end_index": 1063,
      "category_id": 1,
      "subcategory_ids": [
        1,
        3
      ],
      "keywords": [
        "ì‚°ë¶ˆ í”¼í•´",
        "íŠ¹ë³„ìœ„ì›íšŒ",
        "ì¬ë‚œì•ˆì „ê´€ë¦¬",
        "ì§€ì›",
        "ê·¹ë³µ"
      ],
      "stance": "M",
      "policy_analysis": "ì˜ë‚¨ê¶Œ ì‚°ë¶ˆ í”¼í•´ ì§€ì› ë° ì¬ë‚œì•ˆì „ê´€ë¦¬ ëŒ€ì±… ë§ˆë ¨ì„ ìœ„í•œ íŠ¹ë³„ìœ„ì›íšŒ êµ¬ì„±. í”¼í•´ ë³µêµ¬ ë° ì¬ë°œ ë°©ì§€ ìœ„í•œ ë…¸ë ¥."
    }
  ],
  "newly_discovered": []
}
2025-06-10 21:13:49,093 - api.tasks - INFO - tasks - extract_statements_with_llm_discovery - 3549 - âœ… LLM segmented 2 total discussion topics.
2025-06-10 21:13:49,824 - api.tasks - INFO - tasks - update_bill_policy_data - 3129 - âœ… Updated policy data for bill: 2025ë…„ë„ ì œ1íšŒ ì¶”ê°€ê²½ì •ì˜ˆì‚°ì•ˆ...
2025-06-10 21:13:49,824 - api.tasks - INFO - tasks - extract_statements_for_bill_segment - 1830 - ğŸ” Processing bill segment: '2025ë…„ë„ ì œ1íšŒ ì¶”ê°€ê²½ì •ì˜ˆì‚°ì•ˆ' (session: 54598) - 902 chars
2025-06-10 21:13:49,824 - api.tasks - INFO - tasks - process_single_segment_for_statements_with_splitting - 1845 - ğŸ” Processing speech segments for bill '2025ë…„ë„ ì œ1íšŒ ì¶”ê°€ê²½ì •ì˜ˆì‚°ì•ˆ' (session: 54598) - 902 chars
2025-06-10 21:13:49,824 - api.tasks - WARNING - tasks - record_error - 143 - API error (llm_discovery_error). Consecutive errors: 1, backoff: 1s
2025-06-10 21:13:49,825 - api.tasks - ERROR - tasks - extract_statements_with_llm_discovery - 3622 - âŒ Critical error during LLM discovery and segmentation: not enough values to unpack (expected 2, got 1)
2025-06-10 21:13:49,825 - api.tasks - ERROR - tasks - extract_statements_with_llm_discovery - 3624 - Full traceback for LLM discovery:
Traceback (most recent call last):
  File "/home/runner/workspace/backend/api/tasks.py", line 3603, in extract_statements_with_llm_discovery
    statements_in_segment = extract_statements_for_bill_segment(
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/backend/api/tasks.py", line 1835, in extract_statements_for_bill_segment
    return process_single_segment_for_statements_with_splitting(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/backend/api/tasks.py", line 1857, in process_single_segment_for_statements_with_splitting
    start_pos, marker = speaker_markers[i]
    ^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 2, got 1)
2025-06-10 21:13:49,827 - api.tasks - INFO - tasks - extract_statements_with_llm_discovery - 3625 - ğŸ”„ Falling back to keyword-based extraction due to LLM error.
2025-06-10 21:13:49,827 - api.tasks - INFO - tasks - extract_statements_with_keyword_fallback - 4052 - ğŸ” Using enhanced bill name-based fallback extraction for session 54598
2025-06-10 21:13:49,914 - api.tasks - INFO - tasks - extract_statements_with_keyword_fallback - 4064 - ğŸ“‹ Attempting bill name-based extraction for 3 known bills
2025-06-10 21:13:49,914 - api.tasks - INFO - tasks - extract_bill_specific_content - 1742 - No mentions found for bill: 1. ì‚¬ë¦½í•™êµë²• ì¼ë¶€ê°œì •ë²•ë¥ ì•ˆ(ì§„ì„ ë¯¸ ì˜ì› ëŒ€í‘œë°œì˜)(ì˜ì•ˆë²ˆí˜¸ 2205212)
2025-06-10 21:13:49,915 - api.tasks - INFO - tasks - extract_statements_with_keyword_fallback - 4089 - âš ï¸ No meaningful content found for bill: 1. ì‚¬ë¦½í•™êµë²• ì¼ë¶€ê°œì •ë²•ë¥ ì•ˆ(ì§„ì„ ë¯¸ ì˜ì› ëŒ€í‘œë°œì˜)(ì˜ì•ˆë²ˆí˜¸ 2205212)...
2025-06-10 21:13:49,915 - api.tasks - INFO - tasks - extract_bill_specific_content - 1769 - Extracted 1081 chars for bill: ì‚°ë¶ˆí”¼í•´ì§€ì›ëŒ€ì±… íŠ¹ë³„ìœ„ì›íšŒ êµ¬ì„±...
2025-06-10 21:13:49,916 - api.tasks - INFO - tasks - extract_statements_with_keyword_fallback - 4075 - âœ… Found content for bill: ì‚°ë¶ˆí”¼í•´ì§€ì›ëŒ€ì±… íŠ¹ë³„ìœ„ì›íšŒ êµ¬ì„±... (1081 chars)
2025-06-10 21:13:49,916 - api.tasks - INFO - tasks - process_single_segment_for_statements_with_splitting - 1845 - ğŸ” Processing speech segments for bill 'ì‚°ë¶ˆí”¼í•´ì§€ì›ëŒ€ì±… íŠ¹ë³„ìœ„ì›íšŒ êµ¬ì„±' (session: 54598) - 1081 chars
2025-06-10 21:13:49,916 - api.tasks - WARNING - tasks - extract_statements_with_keyword_fallback - 4094 - Error extracting content for bill 'ì‚°ë¶ˆí”¼í•´ì§€ì›ëŒ€ì±… íŠ¹ë³„ìœ„ì›íšŒ êµ¬ì„±': not enough values to unpack (expected 2, got 1)
2025-06-10 21:13:49,917 - api.tasks - INFO - tasks - extract_bill_specific_content - 1769 - Extracted 7463 chars for bill: 2025ë…„ë„ ì œ1íšŒ ì¶”ê°€ê²½ì •ì˜ˆì‚°ì•ˆ...
2025-06-10 21:13:49,918 - api.tasks - INFO - tasks - extract_statements_with_keyword_fallback - 4075 - âœ… Found content for bill: 2025ë…„ë„ ì œ1íšŒ ì¶”ê°€ê²½ì •ì˜ˆì‚°ì•ˆ... (7463 chars)
2025-06-10 21:13:49,918 - api.tasks - INFO - tasks - process_single_segment_for_statements_with_splitting - 1845 - ğŸ” Processing speech segments for bill '2025ë…„ë„ ì œ1íšŒ ì¶”ê°€ê²½ì •ì˜ˆì‚°ì•ˆ' (session: 54598) - 7463 chars
2025-06-10 21:13:49,919 - api.tasks - WARNING - tasks - extract_statements_with_keyword_fallback - 4094 - Error extracting content for bill '2025ë…„ë„ ì œ1íšŒ ì¶”ê°€ê²½ì •ì˜ˆì‚°ì•ˆ': not enough values to unpack (expected 2, got 1)
2025-06-10 21:13:49,919 - api.tasks - INFO - tasks - extract_statements_with_keyword_fallback - 4101 - ğŸ” Using keyword-based search for 3 remaining bills
2025-06-10 21:13:49,921 - api.tasks - INFO - tasks - extract_statements_with_keyword_fallback - 4141 - âœ… Found keyword-based content for: 2025ë…„ë„ ì œ1íšŒ ì¶”ê°€ê²½ì •ì˜ˆì‚°ì•ˆ... (7463 chars)
2025-06-10 21:13:49,921 - api.tasks - INFO - tasks - process_single_segment_for_statements_with_splitting - 1845 - ğŸ” Processing speech segments for bill '2025ë…„ë„ ì œ1íšŒ ì¶”ê°€ê²½ì •ì˜ˆì‚°ì•ˆ' (session: 54598) - 7463 chars
2025-06-10 21:13:49,922 - api.tasks - WARNING - tasks - extract_statements_with_keyword_fallback - 4157 - Error in keyword search for bill '2025ë…„ë„ ì œ1íšŒ ì¶”ê°€ê²½ì •ì˜ˆì‚°ì•ˆ': not enough values to unpack (expected 2, got 1)
2025-06-10 21:13:49,922 - api.tasks - INFO - tasks - extract_statements_with_keyword_fallback - 4141 - âœ… Found keyword-based content for: ì‚°ë¶ˆí”¼í•´ì§€ì›ëŒ€ì±… íŠ¹ë³„ìœ„ì›íšŒ êµ¬ì„±... (1028 chars)
2025-06-10 21:13:49,923 - api.tasks - INFO - tasks - process_single_segment_for_statements_with_splitting - 1845 - ğŸ” Processing speech segments for bill 'ì‚°ë¶ˆí”¼í•´ì§€ì›ëŒ€ì±… íŠ¹ë³„ìœ„ì›íšŒ êµ¬ì„±' (session: 54598) - 1028 chars
2025-06-10 21:13:49,923 - api.tasks - WARNING - tasks - extract_statements_with_keyword_fallback - 4157 - Error in keyword search for bill 'ì‚°ë¶ˆí”¼í•´ì§€ì›ëŒ€ì±… íŠ¹ë³„ìœ„ì›íšŒ êµ¬ì„±': not enough values to unpack (expected 2, got 1)
2025-06-10 21:13:49,923 - api.tasks - INFO - tasks - extract_statements_with_keyword_fallback - 4162 - ğŸ” Searching for additional bills using pattern matching
2025-06-10 21:13:49,924 - api.tasks - INFO - tasks - extract_statements_with_keyword_fallback - 4189 - ğŸ“‹ Found 1 additional bills via pattern matching
2025-06-10 21:13:49,925 - api.tasks - INFO - tasks - process_single_segment_for_statements_with_splitting - 1845 - ğŸ” Processing speech segments for bill 'íŠ¹ë³„ìœ„ì›íšŒ ìœ„ì› ìˆ˜ëŠ” 13ì¸ìœ¼ë¡œ í•˜ê³  ë²•ë¥ ì•ˆ ì‹¬ì‚¬ê¶Œì„ ë¶€ì—¬í•˜ë©° í™œë™ê¸°ê°„ì€ 2025ë…„' (session: 54598) - 553 chars
âŒ Error in PDF processing: not enough values to unpack (expected 2, got 1)
Error processing PDF for session 54598
Traceback (most recent call last):
  File "/home/runner/workspace/backend/api/tasks.py", line 3603, in extract_statements_with_llm_discovery
    statements_in_segment = extract_statements_for_bill_segment(
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/backend/api/tasks.py", line 1835, in extract_statements_for_bill_segment
    return process_single_segment_for_statements_with_splitting(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/backend/api/tasks.py", line 1857, in process_single_segment_for_statements_with_splitting
    start_pos, marker = speaker_markers[i]
    ^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 2, got 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/runner/workspace/backend/api/management/commands/process_pdfs_bypass.py", line 276, in process_pdf_direct
    process_pdf_text_for_statements(
  File "/home/runner/workspace/backend/api/tasks.py", line 4975, in process_pdf_text_for_statements
    return process_session_pdf_text(full_text, session_id, session_obj,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/backend/api/tasks.py", line 4952, in process_session_pdf_text
    statements_data = extract_statements_with_llm_discovery(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/backend/api/tasks.py", line 3627, in extract_statements_with_llm_discovery
    return extract_statements_with_keyword_fallback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/backend/api/tasks.py", line 4203, in extract_statements_with_keyword_fallback
    statements_in_segment = process_single_segment_for_statements_with_splitting(
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/backend/api/tasks.py", line 1857, in process_single_segment_for_statements_with_splitting
    start_pos, marker = speaker_markers[i]
    ^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 2, got 1)
ğŸ—‘ï¸ Cleaned up temporary PDF file
âŒ Failed to process PDF